(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return a(5740)}])},5740:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return i}});var s=a(5893),n=a(7294);let r="feelink_mood_history";function l(){try{let e=localStorage.getItem(r);return e?JSON.parse(e):[]}catch(e){return console.error("Failed to load moods:",e),[]}}function o(e,t){try{let a=l(),s=a.findIndex(t=>t.date===e);if(s>=0)return a[s]={...a[s],...t},localStorage.setItem(r,JSON.stringify(a)),!0;return!1}catch(e){return console.error("Failed to update mood:",e),!1}}function i(){let[e,t]=(0,n.useState)(""),[a,i]=(0,n.useState)([]),[c,d]=(0,n.useState)(!1),[x,m]=(0,n.useState)(null),[u,h]=(0,n.useState)(!1),[g,p]=(0,n.useState)("all"),[y,f]=(0,n.useState)([]),[b,N]=(0,n.useState)(null),[j,v]=(0,n.useState)("");(0,n.useEffect)(()=>{k(),w()},[]);let k=()=>{f(l().sort((e,t)=>t.date.localeCompare(e.date)))},w=()=>{N(function(){let e=new Date().toISOString().slice(0,10);return l().find(t=>t.date===e)||null}())},D=e=>{v(e),setTimeout(()=>v(""),3e3)},S=async()=>{if(!e.trim())return;let a={role:"user",text:e};i(e=>[...e,a]),t(""),d(!0);try{let e=await fetch("".concat("https://ohf61q0oza.execute-api.ap-southeast-2.amazonaws.com","/chat"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:a.text})}),t=await e.json();m(t);let s="Emotion: ".concat(t.emotion," (").concat(Math.round(100*t.confidence),"%)\nActivity: ").concat(t.activity,"\nEncouragement: ").concat(t.encouragement),n={role:"bot",text:s};i(e=>[...e,n])}catch(e){i(e=>[...e,{role:"bot",text:"Sorry, something went wrong. Please try again."}])}finally{d(!1)}},C=e=>{if(!b)return;let t={taskDone:e};e||(t.satisfaction=null),o(b.date,t)&&(k(),w())},E=e=>{b&&o(b.date,{satisfaction:e})&&(k(),w())},_=e=>{confirm("Are you sure you want to delete this mood entry?")&&function(e){try{let t=l().filter(t=>t.date!==e);return localStorage.setItem(r,JSON.stringify(t)),!0}catch(e){return console.error("Failed to delete mood:",e),!1}}(e)&&(D("\uD83D\uDDD1️ Mood entry deleted"),k(),w())},O=e=>({happy:"\uD83E\uDD17",sad:"\uD83D\uDE22",anxious:"\uD83D\uDE30",angry:"\uD83D\uDE20",neutral:"\uD83D\uDE10"})[e]||"\uD83D\uDE10",T=()=>{let e=new Date,t=new Date;switch(g){case"week":t.setDate(e.getDate()-7);break;case"month":t.setDate(e.getDate()-30);break;default:return y}return y.filter(e=>new Date(e.date)>=t)};return(0,s.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-pink-100 via-purple-50 to-cyan-100",children:[j&&(0,s.jsx)("div",{className:"fixed top-4 right-4 bg-white border border-gray-200 rounded-lg px-4 py-2 shadow-lg z-50 animate-ping",children:j}),(0,s.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-6",children:[(0,s.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-6 mb-6",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Chat with Feelink"}),(0,s.jsxs)("div",{className:"h-80 overflow-y-auto border border-gray-200 rounded-lg p-4 mb-4 bg-gray-50",children:[a.map((e,t)=>(0,s.jsx)("div",{className:"mb-3 ".concat("user"===e.role?"text-right":"text-left"),children:(0,s.jsx)("div",{className:"inline-block max-w-xs px-4 py-2 rounded-2xl ".concat("user"===e.role?"bg-gradient-to-r from-pink-400 to-purple-500 text-white":"bg-white border border-gray-200 text-gray-800"),children:(0,s.jsx)("pre",{className:"whitespace-pre-wrap font-sans",children:e.text})})},t)),c&&(0,s.jsx)("div",{className:"text-left",children:(0,s.jsx)("div",{className:"inline-block bg-white border border-gray-200 rounded-2xl px-4 py-2",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"animate-spin w-4 h-4 border-2 border-pink-500 border-t-transparent rounded-full"}),(0,s.jsx)("span",{className:"text-gray-600",children:"Bot is typing..."})]})})})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("input",{value:e,onChange:e=>t(e.target.value),onKeyPress:e=>"Enter"===e.key&&S(),placeholder:"How are you feeling today?",className:"flex-1 px-4 py-3 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-pink-400 focus:border-transparent"}),(0,s.jsx)("button",{onClick:S,disabled:c,className:"px-6 py-3 bg-gradient-to-r from-pink-500 to-purple-600 text-white rounded-full hover:scale-105 transition-transform disabled:opacity-50 disabled:cursor-not-allowed",children:"Send"})]})]}),x&&(0,s.jsxs)("div",{className:"bg-gradient-to-r from-pink-50 to-purple-50 rounded-2xl p-6 mb-6 border border-pink-200",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Set as Day Mood"}),(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,s.jsx)("span",{className:"text-3xl",children:O(x.emotion)}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-medium text-gray-800 capitalize",children:x.emotion}),(0,s.jsxs)("div",{className:"text-sm text-gray-600",children:["Confidence: ",Math.round(100*x.confidence),"%"]})]})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsxs)("div",{className:"text-sm text-gray-700 mb-1",children:[(0,s.jsx)("strong",{children:"Activity:"})," ",x.activity]}),(0,s.jsxs)("div",{className:"text-sm text-gray-700",children:[(0,s.jsx)("strong",{children:"Encouragement:"})," ",x.encouragement]})]}),(0,s.jsx)("button",{onClick:()=>{x&&(function(e){try{let t=l(),a=t.findIndex(t=>t.date===e.date);return a>=0?t[a]={...t[a],...e}:t.push(e),localStorage.setItem(r,JSON.stringify(t)),!0}catch(e){return console.error("Failed to save mood:",e),!1}}({date:new Date().toISOString().slice(0,10),emotion:x.emotion,activity:x.activity,encouragement:x.encouragement,taskDone:!1,satisfaction:null})?(D("✨ Mood saved for today!"),k(),w()):D("❌ Could not save locally"))},className:"w-full py-3 bg-gradient-to-r from-pink-500 to-purple-600 text-white rounded-full font-semibold hover:scale-105 transition-transform shadow-lg",children:"✨ Set as Day Mood"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 text-center mt-2",children:"Saves locally to your device"})]}),b&&(0,s.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-6 mb-6 border border-cyan-200",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Today's Task"}),(0,s.jsx)("div",{className:"flex items-center gap-3 mb-4",children:(0,s.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,s.jsx)("input",{type:"checkbox",checked:b.taskDone,onChange:e=>C(e.target.checked),className:"w-5 h-5 text-pink-500 rounded focus:ring-pink-400"}),(0,s.jsx)("span",{className:"text-gray-800",children:b.activity})]})}),b.taskDone&&(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"How did it make you feel?"}),(0,s.jsx)("div",{className:"flex gap-2",children:[1,2,3,4,5].map(e=>(0,s.jsx)("button",{onClick:()=>E(e),className:"text-2xl transition-transform hover:scale-110 ".concat(b.satisfaction>=e?"text-pink-500":"text-gray-300"),children:"❤️"},e))})]})]}),(0,s.jsxs)("div",{id:"journal-section",className:"bg-white rounded-2xl shadow-lg p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:"Mood Journal"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:()=>p("week"),className:"px-3 py-1 rounded-full text-sm ".concat("week"===g?"bg-pink-500 text-white":"bg-gray-200 text-gray-600"),children:"Last 7 days"}),(0,s.jsx)("button",{onClick:()=>p("month"),className:"px-3 py-1 rounded-full text-sm ".concat("month"===g?"bg-pink-500 text-white":"bg-gray-200 text-gray-600"),children:"Last 30 days"}),(0,s.jsx)("button",{onClick:()=>p("all"),className:"px-3 py-1 rounded-full text-sm ".concat("all"===g?"bg-pink-500 text-white":"bg-gray-200 text-gray-600"),children:"All"})]})]}),0===T().length?(0,s.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[(0,s.jsx)("div",{className:"text-4xl mb-4",children:"\uD83D\uDE0A"}),(0,s.jsx)("p",{className:"text-lg mb-2",children:"No mood entries yet"}),(0,s.jsx)("p",{className:"text-sm",children:'Chat with the bot and click "Set as Day Mood" to get started!'})]}):(0,s.jsx)("div",{className:"grid gap-4",children:T().map((e,t)=>(0,s.jsx)("div",{className:"bg-gradient-to-r from-pink-50 to-purple-50 rounded-xl p-4 border border-pink-200",children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)("span",{className:"text-2xl",children:O(e.emotion)}),(0,s.jsx)("span",{className:"font-semibold text-gray-800 capitalize",children:e.emotion}),(0,s.jsx)("span",{className:"text-sm text-gray-500",children:e.date})]}),(0,s.jsxs)("div",{className:"text-sm text-gray-700 mb-2",children:[(0,s.jsx)("strong",{children:"Activity:"})," ",e.activity]}),(0,s.jsxs)("div",{className:"text-sm text-gray-700 mb-2",children:[(0,s.jsx)("strong",{children:"Encouragement:"})," ",e.encouragement]}),(0,s.jsxs)("div",{className:"flex items-center gap-4 text-sm",children:[(0,s.jsx)("span",{className:"px-2 py-1 rounded-full ".concat(e.taskDone?"bg-green-100 text-green-800":"bg-gray-100 text-gray-600"),children:e.taskDone?"✅ Done":"⬜ Pending"}),e.satisfaction&&(0,s.jsxs)("span",{className:"text-pink-500",children:["❤️".repeat(e.satisfaction)," (",e.satisfaction,"/5)"]})]})]}),(0,s.jsxs)("div",{className:"flex gap-2 ml-4",children:[(0,s.jsx)("button",{onClick:()=>o(e.date,{taskDone:!e.taskDone}),className:"text-sm px-3 py-1 bg-white border border-gray-300 rounded-full hover:bg-gray-50",children:"Toggle Task"}),(0,s.jsx)("button",{onClick:()=>_(e.date),className:"text-sm px-3 py-1 bg-red-100 text-red-600 rounded-full hover:bg-red-200",children:"Delete"})]})]})},t))})]})]})]})}}},function(e){e.O(0,[888,774,179],function(){return e(e.s=5557)}),_N_E=e.O()}]);